(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[705],{2706:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/income",function(){return r(3033)}])},3033:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return x}});var a=r(5893),t=r(7294),n=r(1163),i=r(1663),c=r(2810),o=r(7536);let d=["Salary","Freelance","E-commerce","Interest from Savings","Other"];function l(e){let{onSubmit:s,loading:r=!1}=e,{register:t,handleSubmit:n,reset:i,formState:{errors:c}}=(0,o.cI)(),l=async e=>{await s(e),i()};return(0,a.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Add Income"}),(0,a.jsxs)("form",{onSubmit:n(l),className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Source"}),(0,a.jsxs)("select",{...t("source",{required:"Source is required"}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",children:[(0,a.jsx)("option",{value:"",children:"Select source"}),d.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),c.source&&(0,a.jsx)("p",{className:"mt-1 text-sm text-danger-600",children:c.source.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Amount"}),(0,a.jsx)("input",{type:"number",step:"0.01",min:"0",...t("amount",{required:"Amount is required",min:{value:0,message:"Amount must be positive"}}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",placeholder:"0.00"}),c.amount&&(0,a.jsx)("p",{className:"mt-1 text-sm text-danger-600",children:c.amount.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Date"}),(0,a.jsx)("input",{type:"date",...t("date",{required:"Date is required"}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"}),c.date&&(0,a.jsx)("p",{className:"mt-1 text-sm text-danger-600",children:c.date.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description (Optional)"}),(0,a.jsx)("textarea",{...t("description"),rows:2,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",placeholder:"Add a note..."})]}),(0,a.jsx)("button",{type:"submit",disabled:r,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:r?"Adding...":"Add Income"})]})]})}var m=r(1834),u=r(1410);function x(){let{user:e,loading:s}=(0,u.a)(),r=(0,n.useRouter)(),[o,d]=(0,t.useState)([]),[x,h]=(0,t.useState)(!0);(0,t.useEffect)(()=>{if(!s&&!e){r.push("/login");return}e&&p()},[e,s,r]);let p=async()=>{try{let e=await i.Z.get("/api/income");d(e.data)}catch(e){console.error("Error fetching incomes:",e)}finally{h(!1)}},f=async e=>{try{await i.Z.post("/api/income",e),p()}catch(e){console.error("Error adding income:",e)}},g=async e=>{try{await i.Z.delete("/api/income/".concat(e)),p()}catch(e){console.error("Error deleting income:",e)}};return s||x?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):(0,a.jsx)(c.Z,{children:(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Income"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Manage your income sources"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsx)(l,{onSubmit:f})}),(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Recent Income"}),(0,a.jsx)("div",{className:"space-y-4",children:o.map(e=>(0,a.jsx)(m.Z,{transaction:e,type:"income",onDelete:()=>g(e._id)},e._id))})]})})})]})]})})}}},function(e){e.O(0,[660,536,270,888,774,179],function(){return e(e.s=2706)}),_N_E=e.O()}]);